package com.salesforce.automation;

import org.openqa.selenium.support.ui.ExpectedCondition;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.annotations.AfterClass;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Test;

import com.salesforce.automaton.Base;
import com.salesforce.automaton.Constants;
import com.salesforce.pages.LandingPage;
import com.salesforce.pages.LoginPage;

public class TestCase_Login {
	LoginPage   loginPage;
	LandingPage landingPage;

	@BeforeClass
	public void InitializePage() {
		loginPage = new LoginPage();
		landingPage = new LandingPage();
		Base.getImplicitWait(20);
	}

	@Test
	public void A_InvalidUserName() {
		loginPage.setTxtUsername("kushalsh");
		loginPage.setTxtPassword("test");
		loginPage.clickBtnLogin();
		WebDriverWait wait=new WebDriverWait(Base.getDriverInstance(), 20);
		wait.until(ExpectedConditions.visibilityOf(loginPage.getLblInvalidLogin()));
		Assert.assertTrue(loginPage.getLblInvalidLogintext().contains("Please"),
		        "The assertion is true as the error appears");
	}

	@BeforeMethod
	public void beforeMethod() {
		Base.openUrl(Constants.URL_SALESFORCELOGIN);
	}

	@AfterClass
	public void afterClass() {
		Base.closeWindow();
	}

}
